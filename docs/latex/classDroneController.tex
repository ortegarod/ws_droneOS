\hypertarget{classDroneController}{}\doxysection{Drone\+Controller Class Reference}
\label{classDroneController}\index{DroneController@{DroneController}}


Manages the state and control of a single drone.  




{\ttfamily \#include $<$drone\+\_\+controller.\+hpp$>$}



Collaboration diagram for Drone\+Controller\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classDroneController__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classDroneController_aa67092201d1fb31334379d7ef5a66235}{Drone\+Controller}} (rclcpp\+::\+Node $\ast$node, const std\+::string \&name, const std\+::string \&px4\+\_\+namespace)
\begin{DoxyCompactList}\small\item\em Construct a new \mbox{\hyperlink{classDroneController}{Drone\+Controller}} object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classDroneController_a2bb6bb18bcd5e4c7377bf2c7221bb62f}{arm}} ()
\begin{DoxyCompactList}\small\item\em Arm the drone. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classDroneController_ae52bb1d50cb5414d78af49962b8ea8b4}{disarm}} ()
\begin{DoxyCompactList}\small\item\em Disarm the drone. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classDroneController_af5698222150a6bf5de479016f10acc63}{takeoff}} ()
\begin{DoxyCompactList}\small\item\em Command the drone to takeoff. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classDroneController_a4b6f5aa78d968a1c680da4b64a3dafcb}{set\+\_\+position}} (float x, float y, float z, float yaw)
\begin{DoxyCompactList}\small\item\em Set target position and yaw. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classDroneController_a2da898f4a3cf5b82eafe82e33576791c}{land}} ()
\begin{DoxyCompactList}\small\item\em Command the drone to land. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classDroneController_a4fb59b233337b1e3a16acce4343365d2}{set\+\_\+loiter\+\_\+mode}} ()
\begin{DoxyCompactList}\small\item\em Set the drone to loiter mode. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classDroneController_a95ea01a8c146f1402af327fd97c993c5}{set\+\_\+position\+\_\+mode}} ()
\begin{DoxyCompactList}\small\item\em Set the drone to position control mode. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classDroneController_afde4f7f2ca28f12f12a420ba3756ce34}{is\+\_\+ready}} () const
\begin{DoxyCompactList}\small\item\em Check if the drone is in offboard mode and armed. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
rclcpp\+::\+Node $\ast$ \mbox{\hyperlink{classDroneController_af288d7ec51c90b73f55e301b25d83133}{node\+\_\+}}
\begin{DoxyCompactList}\small\item\em Pointer to ROS2 node. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classDroneController_aaf16794ef6f05a31a83cfbda3a7457ee}{name\+\_\+}}
\begin{DoxyCompactList}\small\item\em Name of the drone. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classDroneController_a0edfab2681011e10cda6f8cb28eaee1a}{ns\+\_\+}}
\begin{DoxyCompactList}\small\item\em PX4 namespace. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classDroneController_a4f0634d2e3ab89165b015c12e882dbad}{target\+\_\+x\+\_\+}} = 0.\+0f
\begin{DoxyCompactList}\small\item\em Target x position. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classDroneController_a603c64f680b92a15a043cc4fabe720f3}{target\+\_\+y\+\_\+}} = 0.\+0f
\begin{DoxyCompactList}\small\item\em Target y position. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classDroneController_a64733531bff81796dfdbeda4371cb061}{target\+\_\+z\+\_\+}} = 0.\+0f
\begin{DoxyCompactList}\small\item\em Target z position. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classDroneController_a659b19b528332abb67e0fac27a318fe7}{target\+\_\+yaw\+\_\+}} = 0.\+0f
\begin{DoxyCompactList}\small\item\em Target yaw angle. \end{DoxyCompactList}\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classDroneAgent}{Drone\+Agent}} $>$ \mbox{\hyperlink{classDroneController_a07d746e6d02ae63c3117b3721fe070fa}{drone\+\_\+agent\+\_\+}}
\begin{DoxyCompactList}\small\item\em Command relay for PX4 communication. \end{DoxyCompactList}\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classOffboardControl}{Offboard\+Control}} $>$ \mbox{\hyperlink{classDroneController_a7d11e531cf01b680050f496425118481}{offboard\+\_\+control\+\_\+}}
\begin{DoxyCompactList}\small\item\em Offboard control manager. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Manages the state and control of a single drone. 

This class handles the core functionality for controlling a drone, including\+:
\begin{DoxyItemize}
\item Offboard control
\item Arm/disarm operations
\item Position control
\item Takeoff and landing 
\end{DoxyItemize}

Definition at line 23 of file drone\+\_\+controller.\+hpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classDroneController_aa67092201d1fb31334379d7ef5a66235}\label{classDroneController_aa67092201d1fb31334379d7ef5a66235}} 
\index{DroneController@{DroneController}!DroneController@{DroneController}}
\index{DroneController@{DroneController}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{DroneController()}{DroneController()}}
{\footnotesize\ttfamily Drone\+Controller\+::\+Drone\+Controller (\begin{DoxyParamCaption}\item[{rclcpp\+::\+Node $\ast$}]{node,  }\item[{const std\+::string \&}]{name,  }\item[{const std\+::string \&}]{px4\+\_\+namespace }\end{DoxyParamCaption})}



Construct a new \mbox{\hyperlink{classDroneController}{Drone\+Controller}} object. 

Constructs a new \mbox{\hyperlink{classDroneController}{Drone\+Controller}} instance.


\begin{DoxyParams}{Parameters}
{\em node} & Pointer to the ROS2 node \\
\hline
{\em name} & Name of the drone \\
\hline
{\em px4\+\_\+namespace} & PX4 namespace for communication\\
\hline
\end{DoxyParams}
Initializes the drone controller with ROS2 publishers and sets up initial state. The drone starts in a connected state, ready for commands.


\begin{DoxyParams}{Parameters}
{\em node} & Pointer to the ROS2 node \\
\hline
{\em name} & Name of the drone \\
\hline
{\em px4\+\_\+namespace} & PX4 namespace for communication \\
\hline
\end{DoxyParams}


Definition at line 21 of file drone\+\_\+controller.\+cpp.



References drone\+\_\+agent\+\_\+, name\+\_\+, node\+\_\+, ns\+\_\+, offboard\+\_\+control\+\_\+, target\+\_\+x\+\_\+, target\+\_\+y\+\_\+, target\+\_\+yaw\+\_\+, and target\+\_\+z\+\_\+.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classDroneController_a2bb6bb18bcd5e4c7377bf2c7221bb62f}\label{classDroneController_a2bb6bb18bcd5e4c7377bf2c7221bb62f}} 
\index{DroneController@{DroneController}!arm@{arm}}
\index{arm@{arm}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{arm()}{arm()}}
{\footnotesize\ttfamily void Drone\+Controller\+::arm (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Arm the drone. 

Sends an arm command to the drone.

Uses the command relay to send a vehicle command to arm the drone. The result is handled asynchronously through a callback. 

Definition at line 42 of file drone\+\_\+controller.\+cpp.



References drone\+\_\+agent\+\_\+, name\+\_\+, and node\+\_\+.

\mbox{\Hypertarget{classDroneController_ae52bb1d50cb5414d78af49962b8ea8b4}\label{classDroneController_ae52bb1d50cb5414d78af49962b8ea8b4}} 
\index{DroneController@{DroneController}!disarm@{disarm}}
\index{disarm@{disarm}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{disarm()}{disarm()}}
{\footnotesize\ttfamily void Drone\+Controller\+::disarm (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Disarm the drone. 

Sends a disarm command to the drone.

Uses the command relay to send a vehicle command to disarm the drone. The result is handled asynchronously through a callback. 

Definition at line 60 of file drone\+\_\+controller.\+cpp.



References drone\+\_\+agent\+\_\+, name\+\_\+, and node\+\_\+.

\mbox{\Hypertarget{classDroneController_afde4f7f2ca28f12f12a420ba3756ce34}\label{classDroneController_afde4f7f2ca28f12f12a420ba3756ce34}} 
\index{DroneController@{DroneController}!is\_ready@{is\_ready}}
\index{is\_ready@{is\_ready}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{is\_ready()}{is\_ready()}}
{\footnotesize\ttfamily bool Drone\+Controller\+::is\+\_\+ready (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Check if the drone is in offboard mode and armed. 

\begin{DoxyReturn}{Returns}
true if the drone is in offboard mode and armed 
\end{DoxyReturn}


Definition at line 160 of file drone\+\_\+controller.\+cpp.



References Offboard\+Control\+::armed, and offboard\+\_\+control\+\_\+.

\mbox{\Hypertarget{classDroneController_a2da898f4a3cf5b82eafe82e33576791c}\label{classDroneController_a2da898f4a3cf5b82eafe82e33576791c}} 
\index{DroneController@{DroneController}!land@{land}}
\index{land@{land}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{land()}{land()}}
{\footnotesize\ttfamily void Drone\+Controller\+::land (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Command the drone to land. 

Commands the drone to land.

Sends a command to initiate the landing sequence. The result is handled asynchronously through a callback. 

Definition at line 108 of file drone\+\_\+controller.\+cpp.



References drone\+\_\+agent\+\_\+, name\+\_\+, and node\+\_\+.

\mbox{\Hypertarget{classDroneController_a4fb59b233337b1e3a16acce4343365d2}\label{classDroneController_a4fb59b233337b1e3a16acce4343365d2}} 
\index{DroneController@{DroneController}!set\_loiter\_mode@{set\_loiter\_mode}}
\index{set\_loiter\_mode@{set\_loiter\_mode}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{set\_loiter\_mode()}{set\_loiter\_mode()}}
{\footnotesize\ttfamily void Drone\+Controller\+::set\+\_\+loiter\+\_\+mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Set the drone to loiter mode. 

Sets the drone to loiter mode.

Sends a command to switch the drone to loiter mode. The result is handled asynchronously through a callback. 

Definition at line 126 of file drone\+\_\+controller.\+cpp.



References drone\+\_\+agent\+\_\+, name\+\_\+, and node\+\_\+.

\mbox{\Hypertarget{classDroneController_a4b6f5aa78d968a1c680da4b64a3dafcb}\label{classDroneController_a4b6f5aa78d968a1c680da4b64a3dafcb}} 
\index{DroneController@{DroneController}!set\_position@{set\_position}}
\index{set\_position@{set\_position}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{set\_position()}{set\_position()}}
{\footnotesize\ttfamily void Drone\+Controller\+::set\+\_\+position (\begin{DoxyParamCaption}\item[{float}]{x,  }\item[{float}]{y,  }\item[{float}]{z,  }\item[{float}]{yaw }\end{DoxyParamCaption})}



Set target position and yaw. 

Sets the target position and yaw for the drone.


\begin{DoxyParams}{Parameters}
{\em x} & Target x position in meters \\
\hline
{\em y} & Target y position in meters \\
\hline
{\em z} & Target z position in meters \\
\hline
{\em yaw} & Target yaw angle in radians\\
\hline
\end{DoxyParams}
Updates the internal target position and yaw values. These values will be used in the next trajectory setpoint message.


\begin{DoxyParams}{Parameters}
{\em x} & Target x position in meters \\
\hline
{\em y} & Target y position in meters \\
\hline
{\em z} & Target z position in meters (negative is up in NED frame) \\
\hline
{\em yaw} & Target yaw angle in radians \\
\hline
\end{DoxyParams}


Definition at line 94 of file drone\+\_\+controller.\+cpp.



References offboard\+\_\+control\+\_\+, target\+\_\+x\+\_\+, target\+\_\+y\+\_\+, target\+\_\+yaw\+\_\+, and target\+\_\+z\+\_\+.



Referenced by takeoff().

\mbox{\Hypertarget{classDroneController_a95ea01a8c146f1402af327fd97c993c5}\label{classDroneController_a95ea01a8c146f1402af327fd97c993c5}} 
\index{DroneController@{DroneController}!set\_position\_mode@{set\_position\_mode}}
\index{set\_position\_mode@{set\_position\_mode}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{set\_position\_mode()}{set\_position\_mode()}}
{\footnotesize\ttfamily void Drone\+Controller\+::set\+\_\+position\+\_\+mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Set the drone to position control mode. 

Sets the drone to position control mode.

Sends a command to switch the drone to position control mode. The result is handled asynchronously through a callback. 

Definition at line 144 of file drone\+\_\+controller.\+cpp.



References drone\+\_\+agent\+\_\+, name\+\_\+, and node\+\_\+.

\mbox{\Hypertarget{classDroneController_af5698222150a6bf5de479016f10acc63}\label{classDroneController_af5698222150a6bf5de479016f10acc63}} 
\index{DroneController@{DroneController}!takeoff@{takeoff}}
\index{takeoff@{takeoff}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{takeoff()}{takeoff()}}
{\footnotesize\ttfamily void Drone\+Controller\+::takeoff (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Command the drone to takeoff. 

Initiates the takeoff sequence.

Starts the offboard control mode and sets the initial position. 

Definition at line 77 of file drone\+\_\+controller.\+cpp.



References name\+\_\+, node\+\_\+, offboard\+\_\+control\+\_\+, set\+\_\+position(), target\+\_\+x\+\_\+, target\+\_\+y\+\_\+, target\+\_\+yaw\+\_\+, and target\+\_\+z\+\_\+.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classDroneController_a07d746e6d02ae63c3117b3721fe070fa}\label{classDroneController_a07d746e6d02ae63c3117b3721fe070fa}} 
\index{DroneController@{DroneController}!drone\_agent\_@{drone\_agent\_}}
\index{drone\_agent\_@{drone\_agent\_}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{drone\_agent\_}{drone\_agent\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classDroneAgent}{Drone\+Agent}}$>$ Drone\+Controller\+::drone\+\_\+agent\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Command relay for PX4 communication. 



Definition at line 87 of file drone\+\_\+controller.\+hpp.



Referenced by arm(), disarm(), Drone\+Controller(), land(), set\+\_\+loiter\+\_\+mode(), and set\+\_\+position\+\_\+mode().

\mbox{\Hypertarget{classDroneController_aaf16794ef6f05a31a83cfbda3a7457ee}\label{classDroneController_aaf16794ef6f05a31a83cfbda3a7457ee}} 
\index{DroneController@{DroneController}!name\_@{name\_}}
\index{name\_@{name\_}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{name\_}{name\_}}
{\footnotesize\ttfamily std\+::string Drone\+Controller\+::name\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Name of the drone. 



Definition at line 80 of file drone\+\_\+controller.\+hpp.



Referenced by arm(), disarm(), Drone\+Controller(), land(), set\+\_\+loiter\+\_\+mode(), set\+\_\+position\+\_\+mode(), and takeoff().

\mbox{\Hypertarget{classDroneController_af288d7ec51c90b73f55e301b25d83133}\label{classDroneController_af288d7ec51c90b73f55e301b25d83133}} 
\index{DroneController@{DroneController}!node\_@{node\_}}
\index{node\_@{node\_}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{node\_}{node\_}}
{\footnotesize\ttfamily rclcpp\+::\+Node$\ast$ Drone\+Controller\+::node\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Pointer to ROS2 node. 



Definition at line 79 of file drone\+\_\+controller.\+hpp.



Referenced by arm(), disarm(), Drone\+Controller(), land(), set\+\_\+loiter\+\_\+mode(), set\+\_\+position\+\_\+mode(), and takeoff().

\mbox{\Hypertarget{classDroneController_a0edfab2681011e10cda6f8cb28eaee1a}\label{classDroneController_a0edfab2681011e10cda6f8cb28eaee1a}} 
\index{DroneController@{DroneController}!ns\_@{ns\_}}
\index{ns\_@{ns\_}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{ns\_}{ns\_}}
{\footnotesize\ttfamily std\+::string Drone\+Controller\+::ns\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



PX4 namespace. 



Definition at line 81 of file drone\+\_\+controller.\+hpp.



Referenced by Drone\+Controller().

\mbox{\Hypertarget{classDroneController_a7d11e531cf01b680050f496425118481}\label{classDroneController_a7d11e531cf01b680050f496425118481}} 
\index{DroneController@{DroneController}!offboard\_control\_@{offboard\_control\_}}
\index{offboard\_control\_@{offboard\_control\_}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{offboard\_control\_}{offboard\_control\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classOffboardControl}{Offboard\+Control}}$>$ Drone\+Controller\+::offboard\+\_\+control\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Offboard control manager. 



Definition at line 88 of file drone\+\_\+controller.\+hpp.



Referenced by Drone\+Controller(), is\+\_\+ready(), set\+\_\+position(), and takeoff().

\mbox{\Hypertarget{classDroneController_a4f0634d2e3ab89165b015c12e882dbad}\label{classDroneController_a4f0634d2e3ab89165b015c12e882dbad}} 
\index{DroneController@{DroneController}!target\_x\_@{target\_x\_}}
\index{target\_x\_@{target\_x\_}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{target\_x\_}{target\_x\_}}
{\footnotesize\ttfamily float Drone\+Controller\+::target\+\_\+x\+\_\+ = 0.\+0f\hspace{0.3cm}{\ttfamily [private]}}



Target x position. 



Definition at line 82 of file drone\+\_\+controller.\+hpp.



Referenced by Drone\+Controller(), set\+\_\+position(), and takeoff().

\mbox{\Hypertarget{classDroneController_a603c64f680b92a15a043cc4fabe720f3}\label{classDroneController_a603c64f680b92a15a043cc4fabe720f3}} 
\index{DroneController@{DroneController}!target\_y\_@{target\_y\_}}
\index{target\_y\_@{target\_y\_}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{target\_y\_}{target\_y\_}}
{\footnotesize\ttfamily float Drone\+Controller\+::target\+\_\+y\+\_\+ = 0.\+0f\hspace{0.3cm}{\ttfamily [private]}}



Target y position. 



Definition at line 83 of file drone\+\_\+controller.\+hpp.



Referenced by Drone\+Controller(), set\+\_\+position(), and takeoff().

\mbox{\Hypertarget{classDroneController_a659b19b528332abb67e0fac27a318fe7}\label{classDroneController_a659b19b528332abb67e0fac27a318fe7}} 
\index{DroneController@{DroneController}!target\_yaw\_@{target\_yaw\_}}
\index{target\_yaw\_@{target\_yaw\_}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{target\_yaw\_}{target\_yaw\_}}
{\footnotesize\ttfamily float Drone\+Controller\+::target\+\_\+yaw\+\_\+ = 0.\+0f\hspace{0.3cm}{\ttfamily [private]}}



Target yaw angle. 



Definition at line 85 of file drone\+\_\+controller.\+hpp.



Referenced by Drone\+Controller(), set\+\_\+position(), and takeoff().

\mbox{\Hypertarget{classDroneController_a64733531bff81796dfdbeda4371cb061}\label{classDroneController_a64733531bff81796dfdbeda4371cb061}} 
\index{DroneController@{DroneController}!target\_z\_@{target\_z\_}}
\index{target\_z\_@{target\_z\_}!DroneController@{DroneController}}
\doxysubsubsection{\texorpdfstring{target\_z\_}{target\_z\_}}
{\footnotesize\ttfamily float Drone\+Controller\+::target\+\_\+z\+\_\+ = 0.\+0f\hspace{0.3cm}{\ttfamily [private]}}



Target z position. 



Definition at line 84 of file drone\+\_\+controller.\+hpp.



Referenced by Drone\+Controller(), set\+\_\+position(), and takeoff().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/drone\+\_\+core/include/drone\+\_\+core/\mbox{\hyperlink{drone__controller_8hpp}{drone\+\_\+controller.\+hpp}}\item 
src/drone\+\_\+core/src/drone\+\_\+core/\mbox{\hyperlink{drone__controller_8cpp}{drone\+\_\+controller.\+cpp}}\end{DoxyCompactItemize}
